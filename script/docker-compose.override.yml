version: '3.1'

services:
  egfds:
    image: egfds:dev
    build:
      context: ..
    external_links:
      - egfds-postgres:db
    ports:
      - 5000:8080
    environment:
      - RDS_HOSTNAME=db
      - RDS_PASSWORD=blah
      - FLASK_ENV=development
    volumes:
      - ../egfds:/app/egfds
    entrypoint:
      - python
    command: ["egfds/application.py"]

networks:
  default:
    external:
      name: pgsql