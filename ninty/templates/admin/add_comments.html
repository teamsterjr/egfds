{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Add Comment{% endblock %}</h1>
{% endblock %}

{% block content %}
<form>
    <div class="form-group form-row">
        <div class="form-group col-md-8">
            <input class="form-control" id="username" name="username" placeholder="Username">
        </div>
        <div class="form-group col-md-2">
            <input class="form-control" id="date" placeholder="date" name="date">
        </div>
    </div>
    {% macro game_vote(counter) %}
    <div class="form-group form-row">
        <div class="form-group col-md-2">
            <input class="form-control typeahead" id="game" placeholder="Game" name="game">
        </div>
        <div class="form-group col-md-2">
            <input id="gameId">
        </div>
        <div class="form-group col-md-3">
            <input class="form-control" id="comment" placeholder="comment">
        </div>
        <div class="form-check form-check-inline col-md-1">
            <input class="form-check-input" type="radio" name="vote{{counter}}" id="inlineRadio{{counter}}1" value="+1">
            <label class="form-check-label" for="inlineRadio{{counter}}1">
                <img src="/static/images/thumb-up.svg" alt="YAY" class="icon">
            </label>
        </div>
        <div class="form-check form-check-inline col-md-1">
            <input class="form-check-input" type="radio" name="vote{{counter}}" id="inlineRadio{{counter}}2" value="0"
                value="0" value="0" checked>
            <label class="form-check-label" for="inlineRadio{{counter}}2">
                <img src="/static/images/meh.svg" alt="MEH" class="icon">
            </label>
        </div>
        <div class="form-check form-check-inline col-md-1">
            <input class="form-check-input" type="radio" name="vote{{counter}}" id="inlineRadio{{counter}}3" value="-1">
            <label class="form-check-label" for="inlineRadio{{counter}}3">
                <img src="/static/images/thumb-down.svg" alt="BOO" class="icon">
            </label>
        </div>
    </div>
    {% endmacro %}
    {{game_vote(0)}}
    <div class="form-group">
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>

</form>
{% endblock %}

{% block scripts %}
{{ super() }}
<script src="/static/js/typeahead.bundle.js"></script>
<script>
    var games = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        // url points to a json file that contains an array of country names, see
        // https://github.com/twitter/typeahead.js/blob/gh-pages/data/countries.json
        prefetch: {
            url: '/games.json',
            cache: false
        }
    });

    // passing in `null` for the `options` arguments will result in the default
    // options being used
    $('.typeahead').typeahead(null, {
        display: 'name',
        source: games
    }).on('typeahead:selected', function (e, datum) {
        console.log(datum)
        $('#gameId').val(datum.id)
    });

</script>
{% endblock %}